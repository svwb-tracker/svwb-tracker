<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>シャドバWB戦績管理</title>

    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3377322995108304"
     crossorigin="anonymous"></script>
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
            color: #e0e0e0;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: linear-gradient(135deg, #3a3a3a 0%, #4a4a4a 100%);
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        .header h1 {
            color: #4a9eff;
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }

        .tabs {
            display: flex;
            background: #3a3a3a;
            border-radius: 10px;
            margin-bottom: 20px;
            overflow: hidden;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);
        }

        .tab {
            flex: 1;
            padding: 15px 20px;
            background: #3a3a3a;
            color: #a0a0a0;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
            font-weight: 500;
        }

        .tab:hover {
            background: #4a4a4a;
            color: #e0e0e0;
        }

        .tab.active {
            background: linear-gradient(135deg, #4a9eff 0%, #64b5f6 100%);
            color: white;
            transform: translateY(-2px);
        }

        .tab-content {
            display: none;
            background: linear-gradient(135deg, #3a3a3a 0%, #4a4a4a 100%);
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            margin-bottom: 20px;
        }

        .tab-content.active {
            display: block;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #e0e0e0;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #555;
            border-radius: 8px;
            background: #2d2d2d;
            color: #e0e0e0;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #4a9eff;
            box-shadow: 0 0 0 3px rgba(74, 158, 255, 0.1);
        }

        .form-group select option {
            background: #2d2d2d;
            color: #e0e0e0;
        }

        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #4a9eff 0%, #64b5f6 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(74, 158, 255, 0.3);
        }

        .btn-success {
            background: linear-gradient(135deg, #4caf50 0%, #66bb6a 100%);
            color: white;
        }

        .btn-danger {
            background: linear-gradient(135deg, #f44336 0%, #ef5350 100%);
            color: white;
        }

        .btn-warning {
            background: linear-gradient(135deg, #ff9800 0%, #ffb74d 100%);
            color: white;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stats-card {
            background: linear-gradient(135deg, #3a3a3a 0%, #4a4a4a 100%);
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.2);
        }

        .stats-card h3 {
            color: #4a9eff;
            margin-bottom: 15px;
            font-size: 1.2rem;
        }

        .chart-container {
            position: relative;
            height: 300px;
            margin-top: 10px;
        }

        .stats-filter {
            margin-bottom: 20px;
            padding: 15px;
            background: #2d2d2d;
            border-radius: 8px;
        }

        .table-container {
            overflow-x: auto;
            background: #3a3a3a;
            border-radius: 8px;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
        }

        .data-table th {
            background: #4a4a4a;
            color: #e0e0e0;
            padding: 12px;
            text-align: left;
            font-weight: 600;
            border-bottom: 2px solid #555;
        }

        .data-table td {
            padding: 12px;
            border-bottom: 1px solid #555;
            color: #e0e0e0;
        }

        .data-table tr:hover {
            background: rgba(74, 158, 255, 0.1);
        }

        .memo-cell {
            max-width: 150px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .memo-tooltip {
            position: relative;
            cursor: help;
        }

        .memo-tooltip:hover:after {
            content: attr(data-memo);
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: #2d2d2d;
            color: #e0e0e0;
            padding: 8px 12px;
            border-radius: 4px;
            white-space: nowrap;
            z-index: 1000;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3);
        }

        .action-buttons {
            display: flex;
            gap: 5px;
        }

        .btn-small {
            padding: 6px 12px;
            font-size: 0.8rem;
            border-radius: 4px;
        }

        .edit-form {
            background: #2d2d2d;
            padding: 15px;
            border-radius: 8px;
            margin-top: 10px;
        }

        .edit-form .form-row {
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
        }

        .ad-space {
            background: #2d2d2d;
            border: 2px dashed #555;
            border-radius: 8px;
            padding: 20px;
            text-align: center;
            margin-top: 30px;
            color: #a0a0a0;
        }

        .footer-links {
            background: linear-gradient(135deg, #3a3a3a 0%, #4a4a4a 100%);
            border-radius: 10px;
            padding: 20px;
            margin-top: 30px;
            text-align: center;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);
        }

        .footer-links h3 {
            color: #4a9eff;
            margin-bottom: 15px;
            font-size: 1.1rem;
        }

        .footer-links-grid {
            display: flex;
            justify-content: center;
            gap: 30px;
            flex-wrap: wrap;
        }

        .footer-link {
            color: #e0e0e0;
            text-decoration: none;
            padding: 8px 16px;
            border-radius: 6px;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .footer-link:hover {
            background: rgba(74, 158, 255, 0.1);
            color: #4a9eff;
            transform: translateY(-1px);
        }

        .filter-container {
            background: #2d2d2d;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .filter-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            align-items: end;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }

            .header h1 {
                font-size: 2rem;
            }

            .tabs {
                flex-direction: column;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .form-row {
                grid-template-columns: 1fr;
            }

            .filter-row {
                grid-template-columns: 1fr;
            }

            .footer-links-grid {
                flex-direction: column;
                gap: 15px;
            }
        }

        .success-message {
            background: linear-gradient(135deg, #4caf50 0%, #66bb6a 100%);
            color: white;
            padding: 12px 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            display: none;
        }

        .error-message {
            background: linear-gradient(135deg, #f44336 0%, #ef5350 100%);
            color: white;
            padding: 12px 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1><i class="fas fa-gamepad"></i> シャドバWB戦績管理</h1>
            <p>シャドウバース ワールズビヨンドの戦績を効率的に管理</p>
        </div>

        <div class="tabs">
            <button class="tab active" onclick="switchTab('input')">
                <i class="fas fa-plus"></i> 戦績入力
            </button>
            <button class="tab" onclick="switchTab('stats')">
                <i class="fas fa-chart-bar"></i> 統計
            </button>
            <button class="tab" onclick="switchTab('history')">
                <i class="fas fa-list"></i> 戦績一覧
            </button>
            <button class="tab" onclick="switchTab('data')">
                <i class="fas fa-database"></i> データ管理
            </button>
        </div>

        <!-- 戦績入力タブ -->
        <div id="input" class="tab-content active">
            <div class="success-message" id="success-msg">
                <i class="fas fa-check-circle"></i> 戦績を記録しました！
            </div>
            <div class="error-message" id="error-msg">
                <i class="fas fa-exclamation-triangle"></i> 入力に不備があります。
            </div>

            <form id="match-form">
                <div class="form-row">
                    <div class="form-group">
                        <label for="date">日付</label>
                        <input type="date" id="date" required>
                    </div>
                    <div class="form-group">
                        <label for="mode">対戦モード</label>
                        <select id="mode" required>
                            <option value="ランクマッチ">ランクマッチ</option>
                            <option value="フリーマッチ">フリーマッチ</option>
                            <option value="グランプリ">グランプリ</option>
                            <option value="イベント">イベント</option>
                        </select>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="my-class">使用クラス</label>
                        <select id="my-class" required>
                            <option value="">選択してください</option>
                            <option value="エルフ">エルフ</option>
                            <option value="ロイヤル">ロイヤル</option>
                            <option value="ウィッチ">ウィッチ</option>
                            <option value="ドラゴン">ドラゴン</option>
                            <option value="ナイトメア">ナイトメア</option>
                            <option value="ビショップ">ビショップ</option>
                            <option value="ネメシス">ネメシス</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="deck-name">デッキ名</label>
                        <input type="text" id="deck-name" placeholder="例：ミッドレンジロイヤル" required>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="opponent-class">対戦相手クラス</label>
                        <select id="opponent-class" required>
                            <option value="">選択してください</option>
                            <option value="エルフ">エルフ</option>
                            <option value="ロイヤル">ロイヤル</option>
                            <option value="ウィッチ">ウィッチ</option>
                            <option value="ドラゴン">ドラゴン</option>
                            <option value="ナイトメア">ナイトメア</option>
                            <option value="ビショップ">ビショップ</option>
                            <option value="ネメシス">ネメシス</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="turn-order">先行/後攻</label>
                        <select id="turn-order" required>
                            <option value="">選択してください</option>
                            <option value="先行">先行</option>
                            <option value="後攻">後攻</option>
                        </select>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="result">勝敗</label>
                        <select id="result" required>
                            <option value="">選択してください</option>
                            <option value="勝利">勝利</option>
                            <option value="敗北">敗北</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="current-rank">現在ランク</label>
                        <select id="current-rank" required>
                            <option value="">選択してください</option>
                            <option value="Beginner0">Beginner0</option>
                            <option value="Beginner1">Beginner1</option>
                            <option value="Beginner2">Beginner2</option>
                            <option value="Beginner3">Beginner3</option>
                            <option value="D0">D0</option>
                            <option value="D1">D1</option>
                            <option value="D2">D2</option>
                            <option value="D3">D3</option>
                            <option value="C0">C0</option>
                            <option value="C1">C1</option>
                            <option value="C2">C2</option>
                            <option value="C3">C3</option>
                            <option value="B0">B0</option>
                            <option value="B1">B1</option>
                            <option value="B2">B2</option>
                            <option value="B3">B3</option>
                            <option value="A0">A0</option>
                            <option value="A1">A1</option>
                            <option value="A2">A2</option>
                            <option value="A3">A3</option>
                            <option value="AA0">AA0</option>
                            <option value="AA1">AA1</option>
                            <option value="AA2">AA2</option>
                            <option value="AA3">AA3</option>
                            <option value="Master">Master</option>
                        </select>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="current-group">現在グループ</label>
                        <select id="current-group" required>
                            <option value="">選択してください</option>
                            <option value="エメラルド">エメラルド</option>
                            <option value="トパーズ">トパーズ</option>
                            <option value="ルビー">ルビー</option>
                            <option value="サファイア">サファイア</option>
                            <option value="ダイヤモンド">ダイヤモンド</option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label for="memo">メモ</label>
                    <textarea id="memo" rows="3" placeholder="プレイング反省、相手デッキの特徴など..."></textarea>
                </div>

                <button type="submit" class="btn btn-primary">
                    <i class="fas fa-save"></i> 戦績を記録
                </button>
            </form>
        </div>

        <!-- 統計タブ -->
        <div id="stats" class="tab-content">
            <div class="stats-filter">
                <label for="deck-filter">デッキフィルター:</label>
                <select id="deck-filter" onchange="updateStats()">
                    <option value="">全デッキ</option>
                </select>
            </div>

            <div class="stats-grid">
                <div class="stats-card">
                    <h3>総合勝率</h3>
                    <div class="chart-container">
                        <canvas id="overall-chart"></canvas>
                    </div>
                </div>
                <div class="stats-card">
                    <h3>クラス別勝率</h3>
                    <div class="chart-container">
                        <canvas id="class-chart"></canvas>
                    </div>
                </div>
                <div class="stats-card">
                    <h3>対戦相手別勝率</h3>
                    <div class="chart-container">
                        <canvas id="opponent-chart"></canvas>
                    </div>
                </div>
                <div class="stats-card">
                    <h3>モード別勝率</h3>
                    <div class="chart-container">
                        <canvas id="mode-chart"></canvas>
                    </div>
                </div>
                <div class="stats-card">
                    <h3>先行/後攻別勝率</h3>
                    <div class="chart-container">
                        <canvas id="turn-chart"></canvas>
                    </div>
                </div>
                <div class="stats-card">
                    <h3>グループ別勝率</h3>
                    <div class="chart-container">
                        <canvas id="group-chart"></canvas>
                    </div>
                </div>
                <div class="stats-card">
                    <h3>ランク別勝率</h3>
                    <div class="chart-container">
                        <canvas id="rank-chart"></canvas>
                    </div>
                </div>
                <div class="stats-card">
                    <h3>日別勝率推移</h3>
                    <div class="chart-container">
                        <canvas id="daily-chart"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <!-- 戦績一覧タブ -->
        <div id="history" class="tab-content">
            <div class="filter-container">
                <div class="filter-row">
                    <div class="form-group">
                        <label for="filter-class">クラス</label>
                        <select id="filter-class" onchange="filterHistory()">
                            <option value="">全て</option>
                            <option value="エルフ">エルフ</option>
                            <option value="ロイヤル">ロイヤル</option>
                            <option value="ウィッチ">ウィッチ</option>
                            <option value="ドラゴン">ドラゴン</option>
                            <option value="ナイトメア">ナイトメア</option>
                            <option value="ビショップ">ビショップ</option>
                            <option value="ネメシス">ネメシス</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="filter-result">結果</label>
                        <select id="filter-result" onchange="filterHistory()">
                            <option value="">全て</option>
                            <option value="勝利">勝利</option>
                            <option value="敗北">敗北</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <button class="btn btn-primary" onclick="clearFilters()">
                            <i class="fas fa-refresh"></i> フィルタークリア
                        </button>
                    </div>
                </div>
            </div>

            <div class="table-container">
                <table class="data-table" id="history-table">
                    <thead>
                        <tr>
                            <th>日付</th>
                            <th>モード</th>
                            <th>使用クラス</th>
                            <th>デッキ名</th>
                            <th>相手</th>
                            <th>先攻/後攻</th>
                            <th>結果</th>
                            <th>ランク</th>
                            <th>グループ</th>
                            <th>メモ</th>
                            <th>操作</th>
                        </tr>
                    </thead>
                    <tbody id="history-body">
                    </tbody>
                </table>
            </div>
        </div>

        <!-- データ管理タブ -->
        <div id="data" class="tab-content">
            <div class="form-row">
                <div class="form-group">
                    <button class="btn btn-success" onclick="exportData()">
                        <i class="fas fa-download"></i> CSVエクスポート
                    </button>
                </div>
                <div class="form-group">
                    <label for="import-file">CSVインポート</label>
                    <input type="file" id="import-file" accept=".csv" onchange="importData(event)">
                </div>
            </div>
            <div class="form-row">
                <div class="form-group">
                    <button class="btn btn-warning" onclick="backupData()">
                        <i class="fas fa-save"></i> データバックアップ
                    </button>
                </div>
                <div class="form-group">
                    <button class="btn btn-danger" onclick="clearAllData()">
                        <i class="fas fa-trash"></i> 全データクリア
                    </button>
                </div>
            </div>
        </div>

        <div class="ad-space">
            <!-- 広告エリア -->
            <p><i class="fas fa-ad"></i> 広告エリア</p>
            <p>広告審査中</p>
        </div>

        <div class="footer-links">
            <h3><i class="fas fa-info-circle"></i> サイト情報</h3>
            <div class="footer-links-grid">
                <a href="privacy-policy.html" class="footer-link">
                    <i class="fas fa-shield-alt"></i> プライバシーポリシー
                </a>
                <a href="terms.html" class="footer-link">
                    <i class="fas fa-file-contract"></i> 利用規約
                </a>
                <a href="contact.html" class="footer-link">
                    <i class="fas fa-envelope"></i> お問い合わせ
                </a>
            </div>
        </div>
    </div>

    <script>
        // グローバル変数
        let matches = JSON.parse(localStorage.getItem('shadowverse-matches') || '[]');
        let charts = {};

        // クラス色設定
        const classColors = {
            'エルフ': '#4CAF50',
            'ロイヤル': '#FFC107',
            'ウィッチ': '#9C27B0',
            'ドラゴン': '#FF5722',
            'ナイトメア': '#795548',
            'ビショップ': '#FFFFFF',
            'ネメシス': '#607D8B'
        };

        // ランク色設定
        const rankColors = {
            'Beginner': '#4CAF50',
            'D': '#FFEB3B',
            'C': '#FF9800',
            'B': '#F44336',
            'A': '#E91E63',
            'AA': '#9C27B0',
            'Master': '#FFFFFF'
        };

        // グループ色設定
        const groupColors = {
            'エメラルド': '#8BC34A',
            'トパーズ': '#FF9800',
            'ルビー': '#F44336',
            'サファイア': '#2196F3',
            'ダイヤモンド': '#FFFFFF'
        };

        // 初期化
        document.addEventListener('DOMContentLoaded', function() {
            initializeForm();
            loadSavedValues();
            updateStats();
            updateDeckFilter();
            displayHistory();
        });

        // タブ切り替え
        function switchTab(tabName) {
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            
            event.target.classList.add('active');
            document.getElementById(tabName).classList.add('active');
            
            if (tabName === 'stats') {
                setTimeout(() => updateStats(), 100);
            } else if (tabName === 'history') {
                displayHistory();
            }
        }

        // フォーム初期化
        function initializeForm() {
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('mode').value = 'ランクマッチ';
        }

        // 保存された値の読み込み
        function loadSavedValues() {
            const savedValues = JSON.parse(localStorage.getItem('shadowverse-form-values') || '{}');
            
            // ローカルタイムゾーン基準の日付取得
            const today = new Date();
            const todayString = today.getFullYear() + '-' + 
                               String(today.getMonth() + 1).padStart(2, '0') + '-' + 
                               String(today.getDate()).padStart(2, '0');
            
            document.getElementById('date').value = todayString;
            
            if (savedValues.mode) document.getElementById('mode').value = savedValues.mode;
            if (savedValues.myClass) document.getElementById('my-class').value = savedValues.myClass;
            if (savedValues.deckName) document.getElementById('deck-name').value = savedValues.deckName;
            if (savedValues.currentRank) document.getElementById('current-rank').value = savedValues.currentRank;
            if (savedValues.currentGroup) document.getElementById('current-group').value = savedValues.currentGroup;
        }

        // フォーム値の保存
        function saveFormValues() {
            const values = {
                mode: document.getElementById('mode').value,
                myClass: document.getElementById('my-class').value,
                deckName: document.getElementById('deck-name').value,
                currentRank: document.getElementById('current-rank').value,
                currentGroup: document.getElementById('current-group').value,
            };
            localStorage.setItem('shadowverse-form-values', JSON.stringify(values));
        }

        // フォーム送信処理
        document.getElementById('match-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const match = {
                id: Date.now(),
                date: document.getElementById('date').value,
                mode: document.getElementById('mode').value,
                myClass: document.getElementById('my-class').value,
                deckName: document.getElementById('deck-name').value,
                opponentClass: document.getElementById('opponent-class').value,
                turnOrder: document.getElementById('turn-order').value,
                result: document.getElementById('result').value,
                currentRank: document.getElementById('current-rank').value,
                currentGroup: document.getElementById('current-group').value,
                memo: document.getElementById('memo').value
            };

            matches.push(match);
            localStorage.setItem('shadowverse-matches', JSON.stringify(matches));
            
            // フォーム値を保存
            saveFormValues();
            
            // リセット項目をクリア
            document.getElementById('opponent-class').value = '';
            document.getElementById('turn-order').value = '';
            document.getElementById('result').value = '';
            
            // 成功メッセージ表示
            const successMsg = document.getElementById('success-msg');
            successMsg.style.display = 'block';
            setTimeout(() => {
                successMsg.style.display = 'none';
            }, 3000);
            
            updateStats();
            updateDeckFilter();
            displayHistory();
        });

        // 統計更新
        function updateStats() {
            const deckFilter = document.getElementById('deck-filter').value;
            let filteredMatches = matches;
            
            if (deckFilter) {
                filteredMatches = matches.filter(match => match.deckName === deckFilter);
            }
            
            updateOverallStats(filteredMatches);
            updateClassStats(filteredMatches);
            updateOpponentStats(filteredMatches);
            updateModeStats(filteredMatches);
            updateTurnStats(filteredMatches);
            updateGroupStats(filteredMatches);
            updateRankStats(filteredMatches);
            updateDailyStats(filteredMatches);
        }

        // 総合統計
        function updateOverallStats(data) {
            const ctx = document.getElementById('overall-chart').getContext('2d');
            
            if (charts.overall) {
                charts.overall.destroy();
            }
            
            const wins = data.filter(m => m.result === '勝利').length;
            const losses = data.filter(m => m.result === '敗北').length;
            const winRate = data.length > 0 ? ((wins / data.length) * 100).toFixed(1) : 0;
            
            charts.overall = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['勝利', '敗北'],
                    datasets: [{
                        label: '試合数',
                        data: [wins, losses],
                        backgroundColor: ['#4caf50', '#f44336'],
                        borderColor: ['#388e3c', '#d32f2f'],
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: `勝率: ${winRate}% (${wins}勝${losses}敗)`,
                            color: '#e0e0e0'
                        },
                        legend: {
                            labels: {
                                color: '#e0e0e0'
                            }
                        }
                    },
                    scales: {
                        x: {
                            ticks: { color: '#e0e0e0' },
                            grid: { color: '#555' }
                        },
                        y: {
                            ticks: { color: '#e0e0e0' },
                            grid: { color: '#555' }
                        }
                    }
                }
            });
        }

        // クラス別統計
        function updateClassStats(data) {
            const ctx = document.getElementById('class-chart').getContext('2d');
            
            if (charts.class) {
                charts.class.destroy();
            }
            
            const classStats = {};
            data.forEach(match => {
                if (!classStats[match.myClass]) {
                    classStats[match.myClass] = { wins: 0, total: 0 };
                }
                classStats[match.myClass].total++;
                if (match.result === '勝利') {
                    classStats[match.myClass].wins++;
                }
            });
            
            const labels = Object.keys(classStats);
            const winRates = labels.map(cls => 
                classStats[cls].total > 0 ? 
                ((classStats[cls].wins / classStats[cls].total) * 100).toFixed(1) : 0
            );
            const colors = labels.map(cls => classColors[cls] || '#777');
            
            charts.class = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [{
                        label: '勝率 (%)',
                        data: winRates,
                        backgroundColor: colors,
                        borderColor: colors.map(c => c + 'CC'),
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            labels: { color: '#e0e0e0' }
                        }
                    },
                    scales: {
                        x: {
                            ticks: { color: '#e0e0e0' },
                            grid: { color: '#555' }
                        },
                        y: {
                            ticks: { color: '#e0e0e0' },
                            grid: { color: '#555' },
                            max: 100
                        }
                    }
                }
            });
        }

        // 対戦相手別統計
        function updateOpponentStats(data) {
            const ctx = document.getElementById('opponent-chart').getContext('2d');
            
            if (charts.opponent) {
                charts.opponent.destroy();
            }
            
            const opponentStats = {};
            data.forEach(match => {
                if (!opponentStats[match.opponentClass]) {
                    opponentStats[match.opponentClass] = { wins: 0, total: 0 };
                }
                opponentStats[match.opponentClass].total++;
                if (match.result === '勝利') {
                    opponentStats[match.opponentClass].wins++;
                }
            });
            
            const labels = Object.keys(opponentStats);
            const winRates = labels.map(cls => 
                opponentStats[cls].total > 0 ? 
                ((opponentStats[cls].wins / opponentStats[cls].total) * 100).toFixed(1) : 0
            );
            const colors = labels.map(cls => classColors[cls] || '#777');
            
            charts.opponent = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [{
                        label: '勝率 (%)',
                        data: winRates,
                        backgroundColor: colors,
                        borderColor: colors.map(c => c + 'CC'),
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            labels: { color: '#e0e0e0' }
                        }
                    },
                    scales: {
                        x: {
                            ticks: { color: '#e0e0e0' },
                            grid: { color: '#555' }
                        },
                        y: {
                            ticks: { color: '#e0e0e0' },
                            grid: { color: '#555' },
                            max: 100
                        }
                    }
                }
            });
        }

        // モード別統計
        function updateModeStats(data) {
            const ctx = document.getElementById('mode-chart').getContext('2d');
            
            if (charts.mode) {
                charts.mode.destroy();
            }
            
            const modeStats = {};
            data.forEach(match => {
                if (!modeStats[match.mode]) {
                    modeStats[match.mode] = { wins: 0, total: 0 };
                }
                modeStats[match.mode].total++;
                if (match.result === '勝利') {
                    modeStats[match.mode].wins++;
                }
            });
            
            const labels = Object.keys(modeStats);
            const winRates = labels.map(mode => 
                modeStats[mode].total > 0 ? 
                ((modeStats[mode].wins / modeStats[mode].total) * 100).toFixed(1) : 0
            );
            
            charts.mode = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [{
                        label: '勝率 (%)',
                        data: winRates,
                        backgroundColor: '#4a9eff',
                        borderColor: '#2196f3',
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            labels: { color: '#e0e0e0' }
                        }
                    },
                    scales: {
                        x: {
                            ticks: { color: '#e0e0e0' },
                            grid: { color: '#555' }
                        },
                        y: {
                            ticks: { color: '#e0e0e0' },
                            grid: { color: '#555' },
                            max: 100
                        }
                    }
                }
            });
        }

        // 先行後攻別統計
        function updateTurnStats(data) {
            const ctx = document.getElementById('turn-chart').getContext('2d');
            
            if (charts.turn) {
                charts.turn.destroy();
            }
            
            const turnStats = {};
            data.forEach(match => {
                if (!turnStats[match.turnOrder]) {
                    turnStats[match.turnOrder] = { wins: 0, total: 0 };
                }
                turnStats[match.turnOrder].total++;
                if (match.result === '勝利') {
                    turnStats[match.turnOrder].wins++;
                }
            });
            
            const labels = Object.keys(turnStats);
            const winRates = labels.map(turn => 
                turnStats[turn].total > 0 ? 
                ((turnStats[turn].wins / turnStats[turn].total) * 100).toFixed(1) : 0
            );
            
            charts.turn = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [{
                        label: '勝率 (%)',
                        data: winRates,
                        backgroundColor: ['#42a5f5', '#5c6bc0'],
                        borderColor: ['#1e88e5', '#3f51b5'],
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            labels: { color: '#e0e0e0' }
                        }
                    },
                    scales: {
                        x: {
                            ticks: { color: '#e0e0e0' },
                            grid: { color: '#555' }
                        },
                        y: {
                            ticks: { color: '#e0e0e0' },
                            grid: { color: '#555' },
                            max: 100
                        }
                    }
                }
            });
        }

        // グループ別統計
        function updateGroupStats(data) {
            const ctx = document.getElementById('group-chart').getContext('2d');
            
            if (charts.group) {
                charts.group.destroy();
            }
            
            const groupStats = {};
            data.forEach(match => {
                if (!groupStats[match.currentGroup]) {
                    groupStats[match.currentGroup] = { wins: 0, total: 0 };
                }
                groupStats[match.currentGroup].total++;
                if (match.result === '勝利') {
                    groupStats[match.currentGroup].wins++;
                }
            });
            
            const labels = Object.keys(groupStats);
            const winRates = labels.map(group => 
                groupStats[group].total > 0 ? 
                ((groupStats[group].wins / groupStats[group].total) * 100).toFixed(1) : 0
            );
            const colors = labels.map(group => groupColors[group] || '#777');
            
            charts.group = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [{
                        label: '勝率 (%)',
                        data: winRates,
                        backgroundColor: colors,
                        borderColor: colors.map(c => c + 'CC'),
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            labels: { color: '#e0e0e0' }
                        }
                    },
                    scales: {
                        x: {
                            ticks: { color: '#e0e0e0' },
                            grid: { color: '#555' }
                        },
                        y: {
                            ticks: { color: '#e0e0e0' },
                            grid: { color: '#555' },
                            max: 100
                        }
                    }
                }
            });
        }

        // ランク別統計
        function updateRankStats(data) {
            const ctx = document.getElementById('rank-chart').getContext('2d');
            
            if (charts.rank) {
                charts.rank.destroy();
            }
            
            const rankStats = {};
            data.forEach(match => {
                const rankGroup = getRankGroup(match.currentRank);
                if (!rankStats[rankGroup]) {
                    rankStats[rankGroup] = { wins: 0, total: 0 };
                }
                rankStats[rankGroup].total++;
                if (match.result === '勝利') {
                    rankStats[rankGroup].wins++;
                }
            });
            
            const labels = Object.keys(rankStats);
            const winRates = labels.map(rank => 
                rankStats[rank].total > 0 ? 
                ((rankStats[rank].wins / rankStats[rank].total) * 100).toFixed(1) : 0
            );
            const colors = labels.map(rank => rankColors[rank] || '#777');
            
            charts.rank = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [{
                        label: '勝率 (%)',
                        data: winRates,
                        backgroundColor: colors,
                        borderColor: colors.map(c => c + 'CC'),
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            labels: { color: '#e0e0e0' }
                        }
                    },
                    scales: {
                        x: {
                            ticks: { color: '#e0e0e0' },
                            grid: { color: '#555' }
                        },
                        y: {
                            ticks: { color: '#e0e0e0' },
                            grid: { color: '#555' },
                            max: 100
                        }
                    }
                }
            });
        }

        // 日別統計
        function updateDailyStats(data) {
            const ctx = document.getElementById('daily-chart').getContext('2d');
            
            if (charts.daily) {
                charts.daily.destroy();
            }
            
            const dailyStats = {};
            data.forEach(match => {
                if (!dailyStats[match.date]) {
                    dailyStats[match.date] = { wins: 0, total: 0 };
                }
                dailyStats[match.date].total++;
                if (match.result === '勝利') {
                    dailyStats[match.date].wins++;
                }
            });
            
            const sortedDates = Object.keys(dailyStats).sort();
            const winRates = sortedDates.map(date => 
                dailyStats[date].total > 0 ? 
                ((dailyStats[date].wins / dailyStats[date].total) * 100).toFixed(1) : 0
            );
            
            charts.daily = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: sortedDates,
                    datasets: [{
                        label: '勝率 (%)',
                        data: winRates,
                        borderColor: '#4a9eff',
                        backgroundColor: 'rgba(74, 158, 255, 0.1)',
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            labels: { color: '#e0e0e0' }
                        }
                    },
                    scales: {
                        x: {
                            ticks: { color: '#e0e0e0' },
                            grid: { color: '#555' }
                        },
                        y: {
                            ticks: { color: '#e0e0e0' },
                            grid: { color: '#555' },
                            max: 100
                        }
                    }
                }
            });
        }

        // ランクグループ取得
        function getRankGroup(rank) {
            if (rank.startsWith('Beginner')) return 'Beginner';
            if (rank.startsWith('D')) return 'D';
            if (rank.startsWith('C')) return 'C';
            if (rank.startsWith('B')) return 'B';
            if (rank.startsWith('A') && !rank.startsWith('AA')) return 'A';
            if (rank.startsWith('AA')) return 'AA';
            if (rank === 'Master') return 'Master';
            return 'Master';  // デフォルト値
        }

        // デッキフィルター更新
        function updateDeckFilter() {
            const deckFilter = document.getElementById('deck-filter');
            const deckNames = [...new Set(matches.map(m => m.deckName))];
            
            deckFilter.innerHTML = '<option value="">全デッキ</option>';
            deckNames.forEach(name => {
                const option = document.createElement('option');
                option.value = name;
                option.textContent = name;
                deckFilter.appendChild(option);
            });
        }

        // 戦績一覧表示
        function displayHistory() {
            const tbody = document.getElementById('history-body');
            tbody.innerHTML = '';
            
            matches.reverse().forEach((match, index) => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${match.date}</td>
                    <td>${match.mode}</td>
                    <td style="color: ${classColors[match.myClass] || '#e0e0e0'}">${match.myClass}</td>
                    <td>${match.deckName}</td>
                    <td style="color: ${classColors[match.opponentClass] || '#e0e0e0'}">${match.opponentClass}</td>
                    <td>${match.turnOrder}</td>
                    <td style="color: ${match.result === '勝利' ? '#4caf50' : '#f44336'}">${match.result}</td>
                    <td>${match.currentRank}</td>
                    <td>${match.currentGroup}</td>
                    <td class="memo-cell memo-tooltip" data-memo="${match.memo || ''}">${match.memo || ''}</td>
                    <td class="action-buttons">
                        <button class="btn btn-small btn-warning" onclick="editMatch(${match.id})">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="btn btn-small btn-danger" onclick="deleteMatch(${match.id})">
                            <i class="fas fa-trash"></i>
                        </button>
                    </td>
                `;
                tbody.appendChild(row);
            });
            matches.reverse(); // 元の順序に戻す
        }

        // 戦績編集
        function editMatch(id) {
            const match = matches.find(m => m.id === id);
            if (!match) return;
            
            const row = event.target.closest('tr');
            if (row.querySelector('.edit-form')) return; // 既に編集中の場合
            
            const originalContent = row.innerHTML;
            
            row.innerHTML = `
                <td colspan="11">
                    <div class="edit-form">
                        <div class="form-row">
                            <div class="form-group">
                                <label>日付</label>
                                <input type="date" id="edit-date" value="${match.date}">
                            </div>
                            <div class="form-group">
                                <label>モード</label>
                                <select id="edit-mode">
                                    <option value="ランクマッチ" ${match.mode === 'ランクマッチ' ? 'selected' : ''}>ランクマッチ</option>
                                    <option value="フリーマッチ" ${match.mode === 'フリーマッチ' ? 'selected' : ''}>フリーマッチ</option>
                                    <option value="グランプリ" ${match.mode === 'グランプリ' ? 'selected' : ''}>グランプリ</option>
                                    <option value="イベント" ${match.mode === 'イベント' ? 'selected' : ''}>イベント</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>使用クラス</label>
                                <select id="edit-my-class">
                                    <option value="エルフ" ${match.myClass === 'エルフ' ? 'selected' : ''}>エルフ</option>
                                    <option value="ロイヤル" ${match.myClass === 'ロイヤル' ? 'selected' : ''}>ロイヤル</option>
                                    <option value="ウィッチ" ${match.myClass === 'ウィッチ' ? 'selected' : ''}>ウィッチ</option>
                                    <option value="ドラゴン" ${match.myClass === 'ドラゴン' ? 'selected' : ''}>ドラゴン</option>
                                    <option value="ナイトメア" ${match.myClass === 'ナイトメア' ? 'selected' : ''}>ナイトメア</option>
                                    <option value="ビショップ" ${match.myClass === 'ビショップ' ? 'selected' : ''}>ビショップ</option>
                                    <option value="ネメシス" ${match.myClass === 'ネメシス' ? 'selected' : ''}>ネメシス</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>デッキ名</label>
                                <input type="text" id="edit-deck-name" value="${match.deckName}">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label>相手クラス</label>
                                <select id="edit-opponent-class">
                                    <option value="エルフ" ${match.opponentClass === 'エルフ' ? 'selected' : ''}>エルフ</option>
                                    <option value="ロイヤル" ${match.opponentClass === 'ロイヤル' ? 'selected' : ''}>ロイヤル</option>
                                    <option value="ウィッチ" ${match.opponentClass === 'ウィッチ' ? 'selected' : ''}>ウィッチ</option>
                                    <option value="ドラゴン" ${match.opponentClass === 'ドラゴン' ? 'selected' : ''}>ドラゴン</option>
                                    <option value="ナイトメア" ${match.opponentClass === 'ナイトメア' ? 'selected' : ''}>ナイトメア</option>
                                    <option value="ビショップ" ${match.opponentClass === 'ビショップ' ? 'selected' : ''}>ビショップ</option>
                                    <option value="ネメシス" ${match.opponentClass === 'ネメシス' ? 'selected' : ''}>ネメシス</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>先行/後攻</label>
                                <select id="edit-turn-order">
                                    <option value="先行" ${match.turnOrder === '先行' ? 'selected' : ''}>先行</option>
                                    <option value="後攻" ${match.turnOrder === '後攻' ? 'selected' : ''}>後攻</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>勝敗</label>
                                <select id="edit-result">
                                    <option value="勝利" ${match.result === '勝利' ? 'selected' : ''}>勝利</option>
                                    <option value="敗北" ${match.result === '敗北' ? 'selected' : ''}>敗北</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label>メモ</label>
                                <textarea id="edit-memo" rows="2">${match.memo || ''}</textarea>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <button class="btn btn-success" onclick="saveMatch(${id})">
                                    <i class="fas fa-save"></i> 保存
                                </button>
                                <button class="btn btn-secondary" onclick="cancelEdit()">
                                    <i class="fas fa-times"></i> キャンセル</button>
                            </div>
                        </div>
                    </div>
                </td>
            `;
            
            row._originalContent = originalContent;
        }

        // 編集保存
        function saveMatch(id) {
            const matchIndex = matches.findIndex(m => m.id === id);
            if (matchIndex === -1) return;
            
            matches[matchIndex] = {
                ...matches[matchIndex],
                date: document.getElementById('edit-date').value,
                mode: document.getElementById('edit-mode').value,
                myClass: document.getElementById('edit-my-class').value,
                deckName: document.getElementById('edit-deck-name').value,
                opponentClass: document.getElementById('edit-opponent-class').value,
                turnOrder: document.getElementById('edit-turn-order').value,
                result: document.getElementById('edit-result').value,
                memo: document.getElementById('edit-memo').value
            };
            
            localStorage.setItem('shadowverse-matches', JSON.stringify(matches));
            displayHistory();
            updateStats();
            updateDeckFilter();
        }

        // 編集キャンセル
        function cancelEdit() {
            const row = event.target.closest('tr');
            if (row._originalContent) {
                row.innerHTML = row._originalContent;
            }
        }

        // 戦績削除
        function deleteMatch(id) {
            if (confirm('この戦績を削除しますか？')) {
                matches = matches.filter(m => m.id !== id);
                localStorage.setItem('shadowverse-matches', JSON.stringify(matches));
                displayHistory();
                updateStats();
                updateDeckFilter();
            }
        }

        // フィルター
        function filterHistory() {
            const classFilter = document.getElementById('filter-class').value;
            const resultFilter = document.getElementById('filter-result').value;
            
            const tbody = document.getElementById('history-body');
            const rows = tbody.querySelectorAll('tr');
            
            rows.forEach(row => {
                const cells = row.querySelectorAll('td');
                if (cells.length === 0) return;
                
                const matchClass = cells[2].textContent;
                const matchResult = cells[6].textContent;
                
                const showClass = !classFilter || matchClass === classFilter;
                const showResult = !resultFilter || matchResult === resultFilter;
                
                row.style.display = (showClass && showResult) ? '' : 'none';
            });
        }

        // フィルタークリア
        function clearFilters() {
            document.getElementById('filter-class').value = '';
            document.getElementById('filter-result').value = '';
            filterHistory();
        }

        // データエクスポート
        function exportData() {
            const csvContent = "data:text/csv;charset=utf-8," 
                + "日付,モード,使用クラス,デッキ名,対戦相手,先行後攻,勝敗,ランク,グループ,メモ\n"
                + matches.map(m => 
                    `${m.date},${m.mode},${m.myClass},${m.deckName},${m.opponentClass},${m.turnOrder},${m.result},${m.currentRank},${m.currentGroup},"${m.memo || ''}"`
                ).join("\n");
            
            const encodedUri = encodeURI(csvContent);
            const link = document.createElement("a");
            link.setAttribute("href", encodedUri);
            link.setAttribute("download", "shadowverse_matches.csv");
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }

        // データインポート
        function importData(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const csv = e.target.result;
                    const lines = csv.split('\n');
                    const headers = lines[0].split(',');
                    
                    const importedMatches = [];
                    for (let i = 1; i < lines.length; i++) {
                        if (lines[i].trim() === '') continue;
                        
                        const values = lines[i].split(',');
                        const match = {
                            id: Date.now() + i,
                            date: values[0],
                            mode: values[1],
                            myClass: values[2],
                            deckName: values[3],
                            opponentClass: values[4],
                            turnOrder: values[5],
                            result: values[6],
                            currentRank: values[7],
                            currentGroup: values[8],
                            memo: values[9] ? values[9].replace(/"/g, '') : ''
                        };
                        importedMatches.push(match);
                    }
                    
                    matches = [...matches, ...importedMatches];
                    localStorage.setItem('shadowverse-matches', JSON.stringify(matches));
                    
                    displayHistory();
                    updateStats();
                    updateDeckFilter();
                    
                    alert('データをインポートしました！');
                } catch (error) {
                    alert('インポートに失敗しました。ファイル形式を確認してください。');
                }
            };
            reader.readAsText(file);
        }

        // データバックアップ
        function backupData() {
            const backupData = {
                matches: matches,
                timestamp: new Date().toISOString()
            };
            
            const dataStr = JSON.stringify(backupData, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
            
            const exportFileDefaultName = 'shadowverse_backup.json';
            
            const linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', exportFileDefaultName);
            linkElement.click();
        }

        // 全データクリア
        function clearAllData() {
            if (confirm('全ての戦績データを削除しますか？この操作は取り消せません。')) {
                if (confirm('本当に削除しますか？')) {
                    matches = [];
                    localStorage.removeItem('shadowverse-matches');
                    localStorage.removeItem('shadowverse-form-values');
                    
                    displayHistory();
                    updateStats();
                    updateDeckFilter();
                    
                    alert('全データを削除しました。');
                }
            }
        }
    </script>
</body>
</html>
    <script id="html_badge_script1">
        window.__genspark_remove_badge_link = "https://www.genspark.ai/api/html_badge/" +
            "remove_badge?token=To%2FBnjzloZ3UfQdcSaYfDmaBcIha66ZxKtkrKb1ajszSi9%2BxB0adzDzEo54OVSPjKi4fOEQLG28ZHgJWRoz5o4Nym76YZZ%2BT%2FYe38KBWfTa1w0DclMSks870U%2FeBJgKn6V4BifJwMX1y5ZcbDhpYghqvE%2FV87KdnRIS%2B%2Fk%2FOjvCR%2B0EHDEqNCg6G0%2BfY67XkQgk0GwrGj5NQ%2B3ONmjQKFAPuCS336riPTfoODCMyGfpV43mlCM3%2FUVbGD%2BaUROao7w2JhueHeGQn41w4vbh1OSdvc0NN%2FunwotqTTcUZpoMk8J4wjiZs8vCKZL7MP7XEtI2z9h7u3G11T%2FXCAVf5dBWK0Xbzh7j4f0Khl%2FHeXVAm1k0m3rYLUHcGo9cUQippbV9sQHrNH5dsJ0A7Cjh3QzjeyChD%2FtzcO8l0Z4HATW%2BwJDk2sv%2BJEX5RrLjElDP89Lo17FX90lLs1mip%2Bb66xpj%2BZW6M4kOzudo1vAGzxl6y2NWzd1ehymr3qufP79NQDPtufo6J4RgqJ5AmirI%2FtA%3D%3D";
        window.__genspark_locale = "ja-JP";
        window.__genspark_token = "To/BnjzloZ3UfQdcSaYfDmaBcIha66ZxKtkrKb1ajszSi9+xB0adzDzEo54OVSPjKi4fOEQLG28ZHgJWRoz5o4Nym76YZZ+T/Ye38KBWfTa1w0DclMSks870U/eBJgKn6V4BifJwMX1y5ZcbDhpYghqvE/V87KdnRIS+/k/OjvCR+0EHDEqNCg6G0+fY67XkQgk0GwrGj5NQ+3ONmjQKFAPuCS336riPTfoODCMyGfpV43mlCM3/UVbGD+aUROao7w2JhueHeGQn41w4vbh1OSdvc0NN/unwotqTTcUZpoMk8J4wjiZs8vCKZL7MP7XEtI2z9h7u3G11T/XCAVf5dBWK0Xbzh7j4f0Khl/HeXVAm1k0m3rYLUHcGo9cUQippbV9sQHrNH5dsJ0A7Cjh3QzjeyChD/tzcO8l0Z4HATW+wJDk2sv+JEX5RrLjElDP89Lo17FX90lLs1mip+b66xpj+ZW6M4kOzudo1vAGzxl6y2NWzd1ehymr3qufP79NQDPtufo6J4RgqJ5AmirI/tA==";
    </script>
    
    <script id="html_notice_dialog_script" src="https://www.genspark.ai/notice_dialog.js"></script>
    
